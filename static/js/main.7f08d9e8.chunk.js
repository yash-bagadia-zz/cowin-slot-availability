(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{211:function(e,t,n){},311:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(22),r=n.n(c),s=n(98),l=n.n(s),o=n(150),d=n(144),j=n(32),u=(n(211),n(199)),h=n(66),p=n(318),b=n(319),f=n(130),O=n(96),x=n(131),m=n(46),v=n(316),g=n(313),y=n(193),_=n(80),k=(n(212),n(137)),C=n.n(k),I=n(314),D=n(320),S=n(317),w=n(4),A=function(e,t,n){return e.length?e.map((function(e){return Object(w.jsx)(S.a,{color:"#108ee9",closable:!0,onClose:function(){return t(e)},children:n?e.district_name:e},n?e.district_id:e)})):Object(w.jsx)("span",{style:{opacity:"0.5",userSelect:"none"},children:"Add a pincode or select a district. You can add multiple."})},E=function(e){var t=e.items,n=void 0===t?[]:t,a=e.itemRemoved,i=e.allItemsRemoved,c=e.visible,r=e.isDistrict;return c?Object(w.jsxs)("div",{className:"simple-border","data-tour":"display-filter",children:[Object(w.jsx)(D.a,{style:{marginRight:"0.5rem"},type:"filter"}),A(n,a,r),n.length>1&&Object(w.jsx)(m.a,{danger:!0,onClick:i,children:"Clear All"})]}):null},P=n(31),F=n.n(P),B=n(315).a.Title,N=new Audio("https://media.geeksforgeeks.org/wp-content/uploads/20190531135120/beep.mp3");function V(e,t){var n=new Date(Number(e));return n.setDate(e.getDate()+t),n}var R=[{label:"Covishield",value:"COVISHIELD"},{label:"Covaxin",value:"COVAXIN"}],T=[{label:"Free",value:"Free"},{label:"Paid",value:"Paid"}],G=[{title:"Center",dataIndex:"name",key:"name"},{title:"District",dataIndex:"district_name",key:"district_name"},{title:"Pincode",dataIndex:"pincode",key:"pincode"},{title:"Date",dataIndex:"date",key:"date"},{title:"Address",dataIndex:"address",key:"address"},{title:"Slots Avalilable",dataIndex:"available_capacity",key:"available_capacity"},{title:"Min Age Limit",dataIndex:"min_age_limit",key:"min_age_limit"},{title:"Vaccine",dataIndex:"vaccine",key:"vaccine"},{title:"Fee type",dataIndex:"fee_type",key:"fee_type"}],L=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function M(){var e=F()(1),t=Object(j.a)(e,3),n=t[0],a=t[1],c=t[2],r=F()(18),s=Object(j.a)(r,3),k=s[0],D=s[1],S=s[2],A=F()(""),P=Object(j.a)(A,2),M=P[0],H=P[1],J=F()(1),X=Object(j.a)(J,3),Y=(X[0],X[1]),q=X[2],z=F()(1),K=Object(j.a)(z,3),Q=K[0],U=K[1],W=K[2],Z=F()(!1),$=Object(j.a)(Z,3),ee=$[0],te=$[1],ne=($[2],F()(["COVAXIN","COVISHIELD"])),ae=Object(j.a)(ne,3),ie=ae[0],ce=ae[1],re=ae[2],se=F()(["Free","Paid"]),le=Object(j.a)(se,3),oe=le[0],de=le[1],je=le[2],ue=F()({state_id:"0",state_name:"Select State"}),he=Object(j.a)(ue,2),pe=he[0],be=he[1],fe=F()([]),Oe=Object(j.a)(fe,2),xe=Oe[0],me=Oe[1],ve=F()([]),ge=Object(j.a)(ve,3),ye=ge[0],_e=ge[1],ke=ge[2],Ce=F()([]),Ie=Object(j.a)(Ce,3),De=Ie[0],Se=Ie[1],we=Ie[2],Ae=F()([]),Ee=Object(j.a)(Ae,2),Pe=Ee[0],Fe=Ee[1],Be=F()([]),Ne=Object(j.a)(Be,2),Ve=Ne[0],Re=Ne[1],Te=F()(1),Ge=Object(j.a)(Te,3),Le=Ge[0],Me=Ge[1],He=Ge[2];function Je(){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(d.a)(l.a.mark((function e(){var t,n,a,i,r,s,o,d,j,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=2===c.current,n=[],a=new Date,"https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByDistrict?district_id=","https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByPin?pincode=",i=[],t?i=we.current:(i=[],ke.current.forEach((function(e){i.push(e.district_id)}))),r=je.current,s=re.current,o=0;o<W.current;o++)for(d=V(a,7*o).toLocaleDateString().replaceAll("/","-"),j=function(e){var a="",c=i[e].trim();a=t&&c?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByPin?pincode="+c:"https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByDistrict?district_id="+c,a+="&date="+d,C.a.get(a).then((function(e){var a=e.data,i=1;a.centers.forEach((function(e){e&&e.sessions&&-1!==r.indexOf(e.fee_type)&&e.sessions.forEach((function(a){if(a.min_age_limit===S.current&&a.available_capacity>=He.current&&-1!==s.indexOf(a.vaccine)){N.play();var r={key:e.name+i,name:e.name,address:e.address,fee_type:e.fee_type,min_age_limit:a.min_age_limit,available_capacity:a.available_capacity,date:a.date,vaccine:a.vaccine,district_name:e.district_name,pincode:e.pincode};n.push(r),i++,console.log((t?"Pincode":"District")+": "+c+"---\x3e>Centre: "+e.name+"-----\x3e>>>---Date: "+a.date+"----\x3e>>> "+a.available_capacity)}}))})),n.length>0&&Re(n)})).catch((function(e){u.b.error("If this message is appearing continuously then something is wrong. \n Please reload the application and then try again or login to Cowin once in the browser and then try again. If the problem persists then contact the Developer - Yash Bagadia"),console.log(e)}))},h=0;h<i.length;h++)j(h);if(!(1e3*q.current>500)){e.next=14;break}return e.next=13,L(1e3*q.current);case 13:Je();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return qe.apply(this,arguments)}function qe(){return(qe=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Re([]),e.next=3,L(1e4);case 3:Ye();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.a.useEffect((function(){C.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(e){var t=e.data.states;me(t)})).catch((function(e){console.log(e)}))}),[]),i.a.useEffect((function(){C.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/districts/"+pe.state_id).then((function(e){var t=e.data.districts;Fe(t)})).catch((function(e){console.log(e)}))}),[pe]);var ze=Object(w.jsx)(h.a,{onClick:function(e){be({state_id:e.key,state_name:e.item.node.innerText})},children:xe.map((function(e){return Object(w.jsx)(h.a.Item,{children:e.state_name},e.state_id)}))}),Ke=Object(w.jsx)(h.a,{onClick:function(e){var t=Object(o.a)(ye);t.find((function(t){return t.district_id===e.key}))||(t.push({district_id:e.key,district_name:e.item.node.innerText}),_e(t))},children:Pe.map((function(e){return Object(w.jsx)(h.a.Item,{children:e.district_name},e.district_id)}))}),Qe=Object(w.jsx)(i.a.Fragment,{children:Object(w.jsx)(E,{items:1===n?ye:De,visible:!0,isDistrict:1===n,itemRemoved:1===n?function(e){var t=ye.filter((function(t){return t.district_id!==e.district_id}));_e(t)}:function(e){var t=De.filter((function(t){return t!==e}));Se(t)},allItemsRemoved:function(){1===n?_e([]):Se([])}})});return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(B,{children:"Cowin Vaccine Slot Monitor"}),Object(w.jsxs)(p.a,{justify:"center",gutter:24,children:[Object(w.jsx)(b.a,{children:Object(w.jsx)(B,{level:5,children:"Enter no. of slots required for notification"})}),Object(w.jsx)(b.a,{children:Object(w.jsx)(I.a,{min:0,max:100,value:Le,onChange:function(e){Me(e)}})}),Object(w.jsx)(b.a,{children:Object(w.jsx)(B,{level:5,children:"Minimum Age"})}),Object(w.jsx)(b.a,{children:Object(w.jsxs)(f.a.Group,{onChange:function(e){D(e.target.value)},value:k,children:[Object(w.jsx)(f.a,{value:18,children:"18+"}),Object(w.jsx)(f.a,{value:45,children:"45+"})]})})]}),Object(w.jsxs)(p.a,{justify:"center",gutter:24,children:[Object(w.jsx)(b.a,{children:Object(w.jsxs)(f.a.Group,{onChange:function(e){a(e.target.value)},value:n,children:[Object(w.jsx)(f.a,{value:1,children:"Search by District"}),Object(w.jsx)(f.a,{value:2,children:"Search by Pincode"})]})}),Object(w.jsx)(b.a,{children:Object(w.jsx)(O.a.Group,{options:R,value:ie,onChange:ce})}),Object(w.jsx)(b.a,{children:Object(w.jsx)(O.a.Group,{options:T,value:oe,onChange:de})})]}),Object(w.jsxs)(p.a,{justify:"center",gutter:24,children:[1===n?Object(w.jsxs)(i.a.Fragment,{children:[Object(w.jsx)(b.a,{children:Object(w.jsx)(x.a,{overlay:ze,trigger:["click"],children:Object(w.jsxs)(m.a,{children:[pe.state_name," ",Object(w.jsx)(_.a,{})]})})}),Object(w.jsx)(b.a,{children:Object(w.jsx)(x.a,{overlay:Ke,trigger:["click"],children:Object(w.jsxs)(m.a,{children:["Select District ",Object(w.jsx)(_.a,{})]})})})]}):Object(w.jsx)(i.a.Fragment,{children:Object(w.jsx)(b.a,{span:12,children:Object(w.jsx)(v.a,{placeholder:"Type a pincode and then press Enter",onPressEnter:function(e){var t=Object(o.a)(De);t.find((function(t){return t===e.target.value}))||(t.push(e.target.value),Se(t),H(""))},onChange:function(e){H(e.target.value)},value:M})})}),Object(w.jsx)(b.a,{children:Object(w.jsx)(B,{level:5,children:"No. of weeks to search for"})}),Object(w.jsx)(b.a,{children:Object(w.jsx)(I.a,{min:1,max:4,value:Q,onChange:function(e){U(e)}})})]}),Object(w.jsx)(p.a,{justify:"center",gutter:24,children:Qe}),Object(w.jsx)(p.a,{justify:"center",gutter:24,children:Object(w.jsx)(b.a,{children:Object(w.jsx)(m.a,{disabled:2===n&&0===De.length||1===n&&0===ye.length,onClick:function(){ee?(Y(0),Re([]),te(!1)):(Y(0),Y(1),Je(),Ye(),te(!0),N.play())},type:ee?"danger":"primary",children:ee?"Stop Searching":"Start Searching"})})}),Object(w.jsx)(p.a,{justify:"center",children:Ve.length>0||!ee?Object(w.jsx)(g.a,{dataSource:Ve,columns:G}):Object(w.jsx)(y.a,{size:"large"})})]})}var H=document.getElementById("root");r.a.render(Object(w.jsx)(a.StrictMode,{children:Object(w.jsx)(M,{})}),H)}},[[311,1,2]]]);
//# sourceMappingURL=main.7f08d9e8.chunk.js.map