(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{201:function(e,t,n){},301:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(22),r=n.n(c),s=n(96),l=n.n(s),d=n(141),o=n(135),j=n(32),u=(n(201),n(65)),b=n(308),p=n(309),h=n(124),O=n(94),f=n(125),x=n(46),v=n(306),m=n(303),g=n(184),y=n(78),_=(n(202),n(128)),k=n.n(_),C=n(304),I=n(310),S=n(307),D=n(4),w=function(e,t,n){return e.length?e.map((function(e){return Object(D.jsx)(S.a,{color:"#108ee9",closable:!0,onClose:function(){return t(e)},children:n?e.district_name:e},n?e.district_id:e)})):Object(D.jsx)("span",{style:{opacity:"0.5",userSelect:"none"},children:"Add a pincode or select a district. You can add multiple."})},A=function(e){var t=e.items,n=void 0===t?[]:t,a=e.itemRemoved,i=e.allItemsRemoved,c=e.visible,r=e.isDistrict;return c?Object(D.jsxs)("div",{className:"simple-border","data-tour":"display-filter",children:[Object(D.jsx)(I.a,{style:{marginRight:"0.5rem"},type:"filter"}),w(n,a,r),n.length>1&&Object(D.jsx)(x.a,{danger:!0,onClick:i,children:"Clear All"})]}):null},E=n(31),P=n.n(E),F=n(305).a.Title,N=new Audio("https://media.geeksforgeeks.org/wp-content/uploads/20190531135120/beep.mp3");function V(e,t){var n=new Date(Number(e));return n.setDate(e.getDate()+t),n}var B=[{label:"Covishield",value:"COVISHIELD"},{label:"Covaxin",value:"COVAXIN"}],R=[{label:"Free",value:"Free"},{label:"Paid",value:"Paid"}],T=[{title:"Center",dataIndex:"name",key:"name"},{title:"District",dataIndex:"district_name",key:"district_name"},{title:"Pincode",dataIndex:"pincode",key:"pincode"},{title:"Date",dataIndex:"date",key:"date"},{title:"Address",dataIndex:"address",key:"address"},{title:"Slots Avalilable",dataIndex:"available_capacity",key:"available_capacity"},{title:"Min Age Limit",dataIndex:"min_age_limit",key:"min_age_limit"},{title:"Vaccine",dataIndex:"vaccine",key:"vaccine"},{title:"Fee type",dataIndex:"fee_type",key:"fee_type"}],G=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function L(){var e=P()(1),t=Object(j.a)(e,3),n=t[0],a=t[1],c=t[2],r=P()(18),s=Object(j.a)(r,3),_=s[0],I=s[1],S=s[2],w=P()(""),E=Object(j.a)(w,2),L=E[0],M=E[1],H=P()(1),J=Object(j.a)(H,3),X=(J[0],J[1]),q=J[2],z=P()(1),Y=Object(j.a)(z,3),K=Y[0],Q=Y[1],U=Y[2],W=P()(!1),Z=Object(j.a)(W,3),$=Z[0],ee=Z[1],te=(Z[2],P()(["COVAXIN","COVISHIELD"])),ne=Object(j.a)(te,3),ae=ne[0],ie=ne[1],ce=ne[2],re=P()(["Free","Paid"]),se=Object(j.a)(re,3),le=se[0],de=se[1],oe=se[2],je=P()({state_id:"0",state_name:"Select State"}),ue=Object(j.a)(je,2),be=ue[0],pe=ue[1],he=P()([]),Oe=Object(j.a)(he,2),fe=Oe[0],xe=Oe[1],ve=P()([]),me=Object(j.a)(ve,3),ge=me[0],ye=me[1],_e=me[2],ke=P()([]),Ce=Object(j.a)(ke,3),Ie=Ce[0],Se=Ce[1],De=Ce[2],we=P()([]),Ae=Object(j.a)(we,2),Ee=Ae[0],Pe=Ae[1],Fe=P()([]),Ne=Object(j.a)(Fe,2),Ve=Ne[0],Be=Ne[1],Re=P()(1),Te=Object(j.a)(Re,3),Ge=Te[0],Le=Te[1],Me=Te[2];function He(){return Je.apply(this,arguments)}function Je(){return(Je=Object(o.a)(l.a.mark((function e(){var t,n,a,i,r,s,d,o,j,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=2===c.current,n=[],a=new Date,"https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByDistrict?district_id=","https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByPin?pincode=",i=[],t?i=De.current:(i=[],_e.current.forEach((function(e){i.push(e.district_id)}))),r=oe.current,s=ce.current,d=0;d<U.current;d++)for(o=V(a,7*d).toLocaleDateString().replaceAll("/","-"),j=function(e){var a="",c=i[e].trim();a=t&&c?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByPin?pincode="+c:"https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByDistrict?district_id="+c,a+="&date="+o,k.a.get(a).then((function(e){var a=e.data,i=1;a.centers.forEach((function(e){e&&e.sessions&&-1!==r.indexOf(e.fee_type)&&e.sessions.forEach((function(a){if(a.min_age_limit===S.current&&a.available_capacity>=Me.current&&-1!==s.indexOf(a.vaccine)){N.play();var r={key:e.name+i,name:e.name,address:e.address,fee_type:e.fee_type,min_age_limit:a.min_age_limit,available_capacity:a.available_capacity,date:a.date,vaccine:a.vaccine,district_name:e.district_name,pincode:e.pincode};n.push(r),i++,console.log((t?"Pincode":"District")+": "+c+"---\x3e>Centre: "+e.name+"-----\x3e>>>---Date: "+a.date+"----\x3e>>> "+a.available_capacity)}}))})),n.length>0&&Be(n)})).catch((function(e){console.log(e)}))},u=0;u<i.length;u++)j(u);if(!(1e3*q.current>500)){e.next=14;break}return e.next=13,G(1e3*q.current);case 13:He();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(){return qe.apply(this,arguments)}function qe(){return(qe=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be([]),e.next=3,G(1e4);case 3:Xe();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.a.useEffect((function(){k.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(e){var t=e.data.states;xe(t)})).catch((function(e){console.log(e)}))}),[]),i.a.useEffect((function(){k.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/districts/"+be.state_id).then((function(e){var t=e.data.districts;Pe(t)})).catch((function(e){console.log(e)}))}),[be]);var ze=Object(D.jsx)(u.a,{onClick:function(e){pe({state_id:e.key,state_name:e.item.node.innerText})},children:fe.map((function(e){return Object(D.jsx)(u.a.Item,{children:e.state_name},e.state_id)}))}),Ye=Object(D.jsx)(u.a,{onClick:function(e){var t=Object(d.a)(ge);t.find((function(t){return t.district_id===e.key}))||(t.push({district_id:e.key,district_name:e.item.node.innerText}),ye(t))},children:Ee.map((function(e){return Object(D.jsx)(u.a.Item,{children:e.district_name},e.district_id)}))}),Ke=Object(D.jsx)(i.a.Fragment,{children:Object(D.jsx)(A,{items:1===n?ge:Ie,visible:!0,isDistrict:1===n,itemRemoved:1===n?function(e){var t=ge.filter((function(t){return t.district_id!==e.district_id}));ye(t)}:function(e){var t=Ie.filter((function(t){return t!==e}));Se(t)},allItemsRemoved:function(){1===n?ye([]):Se([])}})});return Object(D.jsxs)("div",{className:"App",children:[Object(D.jsx)(F,{children:"Cowin Vaccine Slot Monitor"}),Object(D.jsxs)(b.a,{justify:"center",gutter:24,children:[Object(D.jsx)(p.a,{children:Object(D.jsx)(F,{level:5,children:"Select no. of slots required"})}),Object(D.jsx)(p.a,{children:Object(D.jsx)(C.a,{min:0,max:100,value:Ge,onChange:function(e){Le(e)}})}),Object(D.jsx)(p.a,{children:Object(D.jsx)(F,{level:5,children:"Minimum Age"})}),Object(D.jsx)(p.a,{children:Object(D.jsxs)(h.a.Group,{onChange:function(e){I(e.target.value)},value:_,children:[Object(D.jsx)(h.a,{value:18,children:"18+"}),Object(D.jsx)(h.a,{value:45,children:"45+"})]})})]}),Object(D.jsxs)(b.a,{justify:"center",gutter:24,children:[Object(D.jsx)(p.a,{children:Object(D.jsxs)(h.a.Group,{onChange:function(e){a(e.target.value)},value:n,children:[Object(D.jsx)(h.a,{value:1,children:"Search by District"}),Object(D.jsx)(h.a,{value:2,children:"Search by Pincode"})]})}),Object(D.jsx)(p.a,{children:Object(D.jsx)(O.a.Group,{options:B,value:ae,onChange:ie})}),Object(D.jsx)(p.a,{children:Object(D.jsx)(O.a.Group,{options:R,value:le,onChange:de})})]}),Object(D.jsxs)(b.a,{justify:"center",gutter:24,children:[1===n?Object(D.jsxs)(i.a.Fragment,{children:[Object(D.jsx)(p.a,{children:Object(D.jsx)(f.a,{overlay:ze,trigger:["click"],children:Object(D.jsxs)(x.a,{children:[be.state_name," ",Object(D.jsx)(y.a,{})]})})}),Object(D.jsx)(p.a,{children:Object(D.jsx)(f.a,{overlay:Ye,trigger:["click"],children:Object(D.jsxs)(x.a,{children:["Select District ",Object(D.jsx)(y.a,{})]})})})]}):Object(D.jsx)(i.a.Fragment,{children:Object(D.jsx)(p.a,{span:12,children:Object(D.jsx)(v.a,{placeholder:"Type a pincode and then press Enter",onPressEnter:function(e){var t=Object(d.a)(Ie);t.find((function(t){return t===e.target.value}))||(t.push(e.target.value),Se(t),M(""))},onChange:function(e){M(e.target.value)},value:L})})}),Object(D.jsx)(p.a,{children:Object(D.jsx)(F,{level:5,children:"No. of weeks to search for"})}),Object(D.jsx)(p.a,{children:Object(D.jsx)(C.a,{min:1,max:4,value:K,onChange:function(e){Q(e)}})})]}),Object(D.jsx)(b.a,{justify:"center",gutter:24,children:Ke}),Object(D.jsxs)(b.a,{justify:"center",gutter:24,children:[Object(D.jsx)(p.a,{children:Object(D.jsx)(x.a,{disabled:$||2===n&&0===Ie.length||1===n&&0===ge.length,onClick:function(){X(0),X(1),He(),Xe(),ee(!0),N.play()},type:"primary",children:"Start Searching"})}),Object(D.jsx)(p.a,{children:Object(D.jsx)(x.a,{disabled:!$,type:"danger",onClick:function(){X(0),Be([]),ee(!1)},children:"Stop Searching"})})]}),Object(D.jsx)(b.a,{justify:"center",children:Ve.length>0||!$?Object(D.jsx)(m.a,{dataSource:Ve,columns:T}):Object(D.jsx)(g.a,{size:"large"})})]})}var M=document.getElementById("root");r.a.render(Object(D.jsx)(a.StrictMode,{children:Object(D.jsx)(L,{})}),M)}},[[301,1,2]]]);
//# sourceMappingURL=main.6ea085ea.chunk.js.map