(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{201:function(e,t,n){},301:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(22),r=n.n(c),s=n(96),l=n.n(s),d=n(141),o=n(135),j=n(33),u=(n(201),n(65)),p=n(308),b=n(309),h=n(124),O=n(94),f=n(125),x=n(46),m=n(306),v=n(303),g=n(184),y=n(78),_=(n(202),n(128)),k=n.n(_),C=n(304),I=n(310),S=n(307),D=n(4),w=function(e,t,n){return e.length?e.map((function(e){return Object(D.jsx)(S.a,{color:"#108ee9",closable:!0,onClose:function(){return t(e)},children:n?e.district_name:e},n?e.district_id:e)})):Object(D.jsx)("span",{style:{opacity:"0.5",userSelect:"none"},children:"Add a pincode or select a district. You can add multiple."})},A=function(e){var t=e.items,n=void 0===t?[]:t,a=e.itemRemoved,i=e.allItemsRemoved,c=e.visible,r=e.isDistrict;return c?Object(D.jsxs)("div",{className:"simple-border","data-tour":"display-filter",children:[Object(D.jsx)(I.a,{style:{marginRight:"0.5rem"},type:"filter"}),w(n,a,r),n.length>1&&Object(D.jsx)(x.a,{danger:!0,onClick:i,children:"Clear All"})]}):null},E=n(32),P=n.n(E),F=n(305).a.Title,V=new Audio("https://media.geeksforgeeks.org/wp-content/uploads/20190531135120/beep.mp3"),B=[{label:"Covishield",value:"COVISHIELD"},{label:"Covaxin",value:"COVAXIN"}],R=[{label:"Free",value:"Free"},{label:"Paid",value:"Paid"}],T=[{title:"Center",dataIndex:"name",key:"name"},{title:"District",dataIndex:"district_name",key:"district_name"},{title:"Pincode",dataIndex:"pincode",key:"pincode"},{title:"Date",dataIndex:"date",key:"date"},{title:"Address",dataIndex:"address",key:"address"},{title:"Slots Avalilable",dataIndex:"available_capacity",key:"available_capacity"},{title:"Min Age Limit",dataIndex:"min_age_limit",key:"min_age_limit"},{title:"Vaccine",dataIndex:"vaccine",key:"vaccine"},{title:"Fee type",dataIndex:"fee_type",key:"fee_type"}],G=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function L(){var e=P()(1),t=Object(j.a)(e,3),n=t[0],a=t[1],c=t[2],r=P()(18),s=Object(j.a)(r,3),_=s[0],I=s[1],S=s[2],w=P()(""),E=Object(j.a)(w,2),L=E[0],M=E[1],N=P()(1),H=Object(j.a)(N,3),J=(H[0],H[1]),X=H[2],q=P()(!1),z=Object(j.a)(q,3),Y=z[0],K=z[1],Q=(z[2],P()(["COVAXIN","COVISHIELD"])),U=Object(j.a)(Q,3),W=U[0],Z=U[1],$=U[2],ee=P()(["Free","Paid"]),te=Object(j.a)(ee,3),ne=te[0],ae=te[1],ie=te[2],ce=P()({state_id:"0",state_name:"Select State"}),re=Object(j.a)(ce,2),se=re[0],le=re[1],de=P()([]),oe=Object(j.a)(de,2),je=oe[0],ue=oe[1],pe=P()([]),be=Object(j.a)(pe,3),he=be[0],Oe=be[1],fe=be[2],xe=P()([]),me=Object(j.a)(xe,3),ve=me[0],ge=me[1],ye=me[2],_e=P()([]),ke=Object(j.a)(_e,2),Ce=ke[0],Ie=ke[1],Se=P()([]),De=Object(j.a)(Se,2),we=De[0],Ae=De[1],Ee=P()(1),Pe=Object(j.a)(Ee,3),Fe=Pe[0],Ve=Pe[1],Be=Pe[2];function Re(){return Te.apply(this,arguments)}function Te(){return(Te=Object(o.a)(l.a.mark((function e(){var t,n,a,i,r,s,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=2===c.current,n=[],"https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByDistrict?district_id=","https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByPin?pincode=",a=[],t?a=ye.current:(a=[],fe.current.forEach((function(e){a.push(e.district_id)}))),i=ie.current,r=$.current,s=function(e){var c="",s=a[e].trim();c=t&&s?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByPin?pincode="+s:"https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByDistrict?district_id="+s,c+="&date="+(new Date).toLocaleDateString().replaceAll("/","-"),k.a.get(c).then((function(e){var a=e.data,c=1;a.centers.forEach((function(e){e&&e.sessions&&-1!==i.indexOf(e.fee_type)&&e.sessions.forEach((function(a){if(a.min_age_limit===S.current&&a.available_capacity>=Be.current&&-1!==r.indexOf(a.vaccine)){V.play();var i={key:e.name+c,name:e.name,address:e.address,fee_type:e.fee_type,min_age_limit:a.min_age_limit,available_capacity:a.available_capacity,date:a.date,vaccine:a.vaccine,district_name:e.district_name,pincode:e.pincode};n.push(i),c++,console.log((t?"Pincode":"District")+": "+s+"---\x3e>Centre: "+e.name+"-----\x3e>>>---Date: "+a.date+"----\x3e>>> "+a.available_capacity)}}))})),n.length>0&&Ae(n)})).catch((function(e){console.log(e)}))},d=0;d<a.length;d++)s(d);if(!(1e3*X.current>500)){e.next=14;break}return e.next=13,G(1e3*X.current);case 13:Re();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(){return Le.apply(this,arguments)}function Le(){return(Le=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ae([]),e.next=3,G(1e4);case 3:Ge();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.a.useEffect((function(){k.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(e){var t=e.data.states;ue(t)})).catch((function(e){console.log(e)}))}),[]),i.a.useEffect((function(){k.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/districts/"+se.state_id).then((function(e){var t=e.data.districts;Ie(t)})).catch((function(e){console.log(e)}))}),[se]);var Me=Object(D.jsx)(u.a,{onClick:function(e){le({state_id:e.key,state_name:e.item.node.innerText})},children:je.map((function(e){return Object(D.jsx)(u.a.Item,{children:e.state_name},e.state_id)}))}),Ne=Object(D.jsx)(u.a,{onClick:function(e){var t=Object(d.a)(he);t.find((function(t){return t.district_id===e.key}))||(t.push({district_id:e.key,district_name:e.item.node.innerText}),Oe(t))},children:Ce.map((function(e){return Object(D.jsx)(u.a.Item,{children:e.district_name},e.district_id)}))}),He=Object(D.jsx)(i.a.Fragment,{children:Object(D.jsx)(A,{items:1===n?he:ve,visible:!0,isDistrict:1===n,itemRemoved:1===n?function(e){var t=he.filter((function(t){return t.district_id!==e.district_id}));Oe(t)}:function(e){var t=ve.filter((function(t){return t!==e}));ge(t)},allItemsRemoved:function(){1===n?Oe([]):ge([])}})});return Object(D.jsxs)("div",{className:"App",children:[Object(D.jsx)(F,{children:"Cowin Vaccine Slot Monitor"}),Object(D.jsxs)(p.a,{justify:"center",gutter:24,children:[Object(D.jsx)(b.a,{children:Object(D.jsx)(F,{level:5,children:"Select no. of slots required"})}),Object(D.jsx)(b.a,{children:Object(D.jsx)(C.a,{min:0,max:100,value:Fe,onChange:function(e){Ve(e)}})}),Object(D.jsx)(b.a,{children:Object(D.jsx)(F,{level:5,children:"Minimum Age"})}),Object(D.jsx)(b.a,{children:Object(D.jsxs)(h.a.Group,{onChange:function(e){I(e.target.value)},value:_,children:[Object(D.jsx)(h.a,{value:18,children:"18+"}),Object(D.jsx)(h.a,{value:45,children:"45+"})]})})]}),Object(D.jsxs)(p.a,{justify:"center",gutter:24,children:[Object(D.jsx)(b.a,{children:Object(D.jsxs)(h.a.Group,{onChange:function(e){a(e.target.value)},value:n,children:[Object(D.jsx)(h.a,{value:1,children:"Search by District"}),Object(D.jsx)(h.a,{value:2,children:"Search by Pincode"})]})}),Object(D.jsx)(b.a,{children:Object(D.jsx)(O.a.Group,{options:B,value:W,onChange:Z})}),Object(D.jsx)(b.a,{children:Object(D.jsx)(O.a.Group,{options:R,value:ne,onChange:ae})})]}),1===n?Object(D.jsx)(i.a.Fragment,{children:Object(D.jsxs)(p.a,{justify:"center",gutter:24,children:[Object(D.jsx)(b.a,{children:Object(D.jsx)(f.a,{overlay:Me,trigger:["click"],children:Object(D.jsxs)(x.a,{children:[se.state_name," ",Object(D.jsx)(y.a,{})]})})}),Object(D.jsx)(b.a,{children:Object(D.jsx)(f.a,{overlay:Ne,trigger:["click"],children:Object(D.jsxs)(x.a,{children:["Select District ",Object(D.jsx)(y.a,{})]})})})]})}):Object(D.jsx)(i.a.Fragment,{children:Object(D.jsx)(p.a,{justify:"center",gutter:24,children:Object(D.jsx)(b.a,{span:12,children:Object(D.jsx)(m.a,{placeholder:"Type a pincode and then press Enter",onPressEnter:function(e){var t=Object(d.a)(ve);t.find((function(t){return t===e.target.value}))||(t.push(e.target.value),ge(t),M(""))},onChange:function(e){M(e.target.value)},value:L})})})}),Object(D.jsx)(p.a,{justify:"center",gutter:24,children:He}),Object(D.jsxs)(p.a,{justify:"center",gutter:24,children:[Object(D.jsx)(b.a,{children:Object(D.jsx)(x.a,{disabled:Y||2===n&&0===ve.length||1===n&&0===he.length,onClick:function(){J(0),J(1),Re(),Ge(),K(!0),V.play()},type:"primary",children:"Start Searching"})}),Object(D.jsx)(b.a,{children:Object(D.jsx)(x.a,{disabled:!Y,type:"danger",onClick:function(){J(0),Ae([]),K(!1)},children:"Stop Searching"})})]}),Object(D.jsx)(p.a,{justify:"center",children:we.length>0||!Y?Object(D.jsx)(v.a,{dataSource:we,columns:T}):Object(D.jsx)(g.a,{size:"large"})})]})}var M=document.getElementById("root");r.a.render(Object(D.jsx)(a.StrictMode,{children:Object(D.jsx)(L,{})}),M)}},[[301,1,2]]]);
//# sourceMappingURL=main.05396fa5.chunk.js.map